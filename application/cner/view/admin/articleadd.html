<!DOCTYPE HTML>

<html>

<head>

<meta charset="utf-8">

<meta name="renderer" content="webkit|ie-comp|ie-stand">

<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />

<meta http-equiv="Cache-Control" content="no-siteapp" />

<!--[if lt IE 9]>

<script type="text/javascript" src="__STATIC__/lib/html5shiv.js"></script>

<script type="text/javascript" src="__STATIC__/lib/respond.min.js"></script>

<![endif]-->

<link rel="stylesheet" type="text/css" href="__STATIC__/static/h-ui/css/H-ui.min.css" />

<link rel="stylesheet" type="text/css" href="__STATIC__/static/h-ui.admin/css/H-ui.admin.css" />

<link rel="stylesheet" type="text/css" href="__STATIC__/lib/Hui-iconfont/1.0.8/iconfont.css" />

<link rel="stylesheet" type="text/css" href="__STATIC__/static/h-ui.admin/skin/default/skin.css" id="skin" />

<link rel="stylesheet" type="text/css" href="__STATIC__/static/h-ui.admin/css/style.css" />

<link href="__STATIC__/lib/webuploader/0.1.5/webuploader.css" rel="stylesheet" type="text/css" />

<!--[if IE 6]>

<script type="text/javascript" src="__STATIC__/lib/DD_belatedPNG_0.0.8a-min.js" ></script>

<script>DD_belatedPNG.fix('*');</script>

<![endif]-->

<title>添加新闻</title>

<meta name="keywords" content="H-ui.admin v3.1,H-ui网站后台模版,后台模版下载,后台管理系统模版,HTML后台模版下载">

<meta name="description" content="H-ui.admin v3.1，是一款由国人开发的轻量级扁平化网站后台模板，完全免费开源的网站后台管理系统模版，适合中小型CMS后台系统。">

</head>

<body>

<article class="page-container">

	<form class="form form-horizontal" id="articleAdd" method="post"  >

	<div class="row cl">

		<label class="form-label col-xs-4 col-sm-3"><span class="c-red">*</span>文章题目：</label>

		<div class="formControls col-xs-8 col-sm-9">

			<input type="text" class="input-text" value=""   id="article_title" name="article_title">

		</div>

	</div>

	<div class="row cl">

		<label class="form-label col-xs-4 col-sm-3"><span class="c-red">*</span>简介：</label>

		<div class="formControls col-xs-8 col-sm-9">

			<input type="text" class="input-text" value=""   id="article_des" name="article_des">

		</div>

	</div>


	
    <div class="row cl">

		<label class="form-label col-xs-4 col-sm-3"><span class="c-red">*</span>置顶类型：</label>

		<div class="formControls col-xs-8 col-sm-9 skin-minimal">

			<div class="radio-box">

				<input name="article_role" type="radio" id="article_role-1" value="0" checked>

				<label for="article_role-1">不顶置</label>

			</div>

			<div class="radio-box">

				<input type="radio" id="article_role-2" name="article_role" value="1">

				<label for="article_role-2">热门新闻</label>

			</div>

			<div class="radio-box">

				<input type="radio" id="article_role-2" name="article_role" value="2">

				<label for="article_role-2">视频新闻</label>

			</div>

			<div class="radio-box">

				<input type="radio" id="article_role-2" name="article_role" value="3">

				<label for="article_role-2">图片新闻</label>

			</div>

            <div class="radio-box">

				<input type="radio" id="article_role-2" name="article_role" value="4">

				<label for="article_role-2">导航新闻</label>

			</div>

		</div>

	</div>  
  
    <div class="row cl">
					<label class="form-label col-xs-4 col-sm-3">
						
						封面图：</label>
					<div class="formControls col-xs-8 col-sm-9">
						<div class="uploader-thum-container">
							<input type="hidden"  placeholder="" id="main_img_url" name="article_img" value="">
							<div id="fileList" class="uploader-list"></div>
							<div id="filePicker">选择图片</div>
							<div style="clear: both"></div>
							<img src="" id="thumb"  style="display: none;width: 400px">
						</div>
					</div>
				</div>

	<div class="row cl">

		<label class="form-label col-xs-4 col-sm-3"><span class="c-red">*</span>内容：</label>

		<div class="formControls col-xs-8 col-sm-9">

			

			<script id="editor" name="article_content" type="text/plain" ></script> 



		</div>

	</div>

	

	

	

	

	

	

	<div class="row cl">

		<div class="col-xs-8 col-sm-9 col-xs-offset-4 col-sm-offset-3">

			<input class="btn btn-primary radius" type="button" id="sub" name="sub" value="&nbsp;&nbsp;提交&nbsp;&nbsp;">

		</div>

	</div>

	</form>

</article>



<!--_footer 作为公共模版分离出去--> 

<script type="text/javascript" src="__STATIC__/lib/jquery/1.9.1/jquery.min.js"></script> 

<script type="text/javascript" src="__STATIC__/lib/layer/2.4/layer.js"></script>

<script type="text/javascript" src="__STATIC__/static/h-ui/js/H-ui.min.js"></script> 

<script type="text/javascript" src="__STATIC__/static/h-ui.admin/js/H-ui.admin.js"></script> <!--/_footer 作为公共模版分离出去-->



<!--请在下方写此页面业务相关的脚本-->

<script type="text/javascript" src="__STATIC__/lib/jquery.validation/1.14.0/jquery.validate.js"></script> 

<script type="text/javascript" src="__STATIC__/lib/jquery.validation/1.14.0/validate-methods.js"></script> 

<script type="text/javascript" src="__STATIC__/lib/jquery.validation/1.14.0/messages_zh.js"></script> 

<script type="text/javascript">

</script> 





<script type="text/javascript" src="__STATIC__/lib/ueditor/1.4.3/ueditor.config.js"></script>

<script type="text/javascript" src="__STATIC__/lib/ueditor/1.4.3/ueditor.all.min.js"> </script>

<script type="text/javascript" src="__STATIC__/lib/ueditor/1.4.3/lang/zh-cn/zh-cn.js"></script>
<script type="text/javascript" src="__STATIC__/lib/webuploader/0.1.5/webuploader.min.js"></script>

<!--/请在上方写此页面业务相关的脚本-->

<script type="text/javascript">

	$(document).ready(function() {

	$('#sub').click(function() {

		$.ajax({

			url: "{:url('admin/articleAdd')}",

			type: 'post',

			dataType: 'json',

			data: $('#articleAdd').serialize(),

			success:function(data){

				if(data.status==0){

					layer.msg(data.msg);

				}else{

					parent.location.href="{:url('articlelist')}";
				}

			}

		})

		

	});

});

</script>

<script type="text/javascript">

	$(function(){

	var ue = UE.getEditor('editor');

	var uploader = WebUploader.create({
		auto: true,
		swf: '__STATIC__/lib/webuploader/0.1.5/Uploader.swf',

		// 文件接收服务端。
		server: "{:url('Image/uploadarticle',['filename'=>'article'])}",

		// 选择文件的按钮。可选。
		// 内部根据当前运行是创建，可能是input元素，也可能是flash.
		pick: '#filePicker',

		// 不压缩image, 默认如果是jpeg，文件上传前会压缩一把再上传！
		resize: false,
		// 只允许选择图片文件。
		accept: {
			title: 'Images',
			extensions: 'gif,jpg,jpeg,bmp,png',
			mimeTypes: 'image/*'
		}
	});
	uploader.on('uploadAccept', function (file, data) {
		if (data.status == 1) {
			$('#main_img_url').val(data.message);
			$('#thumb').attr('src','__STATIC__/'+ data.message);
			$('#thumb').show();
		} else if (data.status != 1) {
			layer.msg('上传失败,请重试！', {icon: 5});
		}
	});

});

</script>

</body>

</html>