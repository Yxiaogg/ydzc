$(document).ready(function(){
	  $(".begin-wrap").delegate(".delete","click",function(){
			 var data = $(this).attr("data");
			 $.ajax({
		        type:"get",
		        url:"/extend/ajax-Browse-records/controller.php",
		        data:"enews=DelCheckInfoId&id="+data+"&t="+Math.random(),
		        dataType: "json",
		        success: function (json)
		        {
		        	if(json.resid ==0)
		        	{
		        	    $("#delete_"+json.id).parent().remove();
		        	    var numstr = "您以选择了<span>"+json.num+"</span>房屋:";
		                $(".bw-title").html(numstr);
		        	}
		        	ContrastPage()
		        }
			 })

		  });
})
 
/*
//记录浏览的信息id
function AutoRecord(id)
{
    if(id)
    {
        $.ajax({
            type:"get",
            url:"/extend/ajax-Browse-records/controller.php",
            data:"id="+id+"&enews=AutoRecord&t="+Math.random(),
            dataType: "html",
            success: function (html)
            {
                //$("#team").html(html);
            }
        })
    }
}
*/
//加载浏览过的数据
function ReadRecord()
{
    $.ajax({
        type:"get",
        url:"/extend/ajax-Browse-records/controller.php",
        data:"enews=ReadRecord&t="+Math.random(),
        dataType: "json",
        success: function (json)
        {
            if(json.resid ==1)
            {
                $("#browsemsg").html(json.html);
            }
            if(json.resid!=1)
            {
                HouseHot();
            }
        }
    })
}
//当前没有浏览信息 系统自动加载推荐的房源
function HouseHot()
{
        $.ajax({
        type:"get",
        url:"/extend/ajax-Browse-records/controller.php",
        data:"enews=HouseHot&t="+Math.random(),
        dataType: "json",
        success: function (json)
        {
            if(json.resid ==1)
            {
                $("#browsemsg").html(json.html);
            }
        }
    })
}

/*
 * 楼盘对的一系列的操作
 * 点击对比按键将使用cooking的方式存储楼盘的ID
 * 点弹窗的对比按键，将从存储的COOKING中获取所有的信息，进行搜索展示
 * 一次对比最多有6条数据进行对比，
 * 同时判断如果改条信息已经在对比的列表中，将不在参与对应
 * 从对比框中删除相应的对比信息
 * */
function CheckInfoId(classid,id)
{
    var data = document.getElementById("checkbox_"+id)
    
	if(data.checked ==false)
    {
		return
    }
	$.ajax({
        type:"get",
        url:"/extend/ajax-Browse-records/controller.php",
        data:"enews=CheckInfoId&classid="+classid+"&id="+id+"&t="+Math.random(),
        dataType: "json",
        success: function (json)
        {
        	ContrastPage()
            if(json.resid ==0)
            {
                var numstr = "您以选择了<span>"+json.num+"</span>房屋:";
                $(".bw-title").html(numstr);
                $(".all-xzl").html(json.html);
                ContrastPage();
                return;
            }
            else if(json.resid==3)
            {
            	ContrastPage()
            	alert(json.msg);
            	return;
            }
            var numstr = "您以选择了<span>"+json.num+"</span>房屋:";
            $(".bw-title").html(numstr);
            $(".all-xzl").html(json.html);
            alert(json.msg);
        }
    })
}

//对比的页面显示操作
function ContrastPage()
{
	var a = $(".begin-wrap").find(".delete");
	if(a.length<1)
	{
		$(".begin-submit").attr("href","javascript:;");
		$(".begin-submit").attr("target","_self");
		return;
	}
	$(".begin-submit").attr("href","/extend/ajax-Browse-records/");
	$(".begin-submit").attr("target","_blank");
	/*
	//获取已经选择的信息的ID
	$.ajax({
		type:"get",
        url:"/extend/ajax-Browse-records/controller.php",
        data:"enews=Contrast&t="+Math.random(),
        dataType: "json",
        success: function (json)
        {
        	if(json.num !=0)
        	{
        		//window.open("/extend/ajax-Browse-records/?team="+json.param);
        		var url = "/extend/ajax-Browse-records/?team="+json.param;
        		/*
        		$(".begin-submit").attr("href",url);
        		$(".begin-submit").attr("target","_blank");
        		//window.location.href="/extend/ajax-Browse-records/?team="+json.param
        		var a = $("<a href='"+url+"' target='_blank'>开始对比</a>").get(0);  
                var e = document.createEvent('UIEvents');  
                e.initEvent('click', true, true);  
                a.dispatchEvent(e);  
                console.log('event has been changed'); 
               
				//window.open(url);
        	}
        	else
        	{
        		alert("请选择对比的信息");
        	}
        	
        }
	})
	*/
}